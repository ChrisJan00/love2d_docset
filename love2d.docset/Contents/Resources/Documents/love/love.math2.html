<html class="client-nojs" dir="ltr" lang="en">
  <head>
    <meta charset="UTF-8"/>
    <title>love.math.linearToGamma - LOVE</title>
    <meta content="MediaWiki 1.24.2" name="generator"/>
    <link href="" rel="ExportRDF" title="love.math.linearToGamma" type="application/rdf+xml"/>
    <link href="favicon.ico" rel="shortcut icon"/>
    <link href="opensearch_desc.php" rel="search" title="LOVE (en)" type="application/opensearchdescription+xml"/>
    <link href="api.php_action_rsd" rel="EditURI" type="application/rsd+xml"/>
    <link href="" hreflang="x-default" rel="alternate"/>
    <link href="http://www.gnu.org/copyleft/fdl.html" rel="copyright"/>
    <link href="" rel="alternate" title="LOVE Atom feed" type="application/atom+xml"/>
    <link href="love_wiki_style.css" rel="stylesheet"/>
    <meta content="" name="ResourceLoaderDynamicStyles"/>
    <style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: love2d_wiki:resourceloader:filter:minify-css:7:daf253d59690fd9cabb6b95510bce103 */</style>
  </head>
  <body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-love_math_linearToGamma skin-love action-view">
    <div id="globalWrapper">
      <div id="column-content">
        <div class="mw-body" id="content" role="main">
          <h1 class="firstHeading" id="firstHeading" lang="en">love.math.linearToGamma</h1>
          <div id="bodyContent">
            <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
              <table bgcolor="#d0d0ff" style="margin-top: 1em; padding: 3px; border-radius:5px; -moz-border-radius:5px;">
                <tr>
                  <td>
                    <i>
                      <b>Available since L&#xD6;VE <a href="0.92.html" title="0.9.1">0.9.1</a></b>
                    </i>
                  </td>
                </tr>
                <tr>
                  <td>
                    <small>This function is not supported in earlier versions.</small>
                  </td>
                </tr>
              </table>
              <p>Converts a color from linear-space (RGB) to gamma-space (sRGB). This is useful when storing linear RGB color values in an image, because the linear RGB color space has less precision than sRGB for dark colors, which can result in noticeable color banding when drawing.
</p>
              <p>In general, colors chosen based on what they look like on-screen are already in gamma-space and should not be double-converted. Colors calculated using math are often in the linear RGB space.
</p>
              <p>Read more about gamma-correct rendering <a class="external text" href="http://http.developer.nvidia.com/GPUGems3/gpugems3_ch24.html" rel="nofollow">here</a>, <a class="external text" href="http://filmicgames.com/archives/299" rel="nofollow">here</a>, and <a class="external text" href="http://renderwonk.com/blog/index.php/archive/adventures-with-gamma-correct-rendering/" rel="nofollow">here</a>.
</p>
              <table align="center" bgcolor="gold" style="border-style:solid;border-width:1px;-moz-border-radius:3px;border-radius:3px;" width="80%">
                <tr>
                  <td width="1">
                    <img alt="O.png" height="64" src="o.png" width="64"/>
                  </td>
                  <td>Gamma-correct rendering is an advanced topic and it's easy to get color-spaces mixed up. If you're not sure whether you need this, you might want to avoid it.
</td>
                  <td width="1">&#xA0;
</td>
                </tr>
              </table>
              <br/>
              <h2>
                <span class="mw-headline" id="Function">Function</span>
              </h2>
              <h3>
                <span class="mw-headline" id="Synopsis">Synopsis</span>
              </h3>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="lua source-lua">
                  <pre class="de1">cr<span class="sy0">,</span> cg<span class="sy0">,</span> cb <span class="sy0">=</span> love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>linearToGamma<span class="br0">(</span> lr<span class="sy0">,</span> lg<span class="sy0">,</span> lb <span class="br0">)</span></pre>
                </div>
              </div>
              <h3>
                <span class="mw-headline" id="Arguments">Arguments</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="number.html" title="number">number</a> lr</code>
                </dt>
                <dd> The red channel of the linear RGB color to convert.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> lg</code>
                </dt>
                <dd> The green channel of the linear RGB color to convert.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> lb</code>
                </dt>
                <dd> The blue channel of the linear RGB color to convert.</dd>
              </dl>
              <h3>
                <span class="mw-headline" id="Returns">Returns</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="number.html" title="number">number</a> cr</code>
                </dt>
                <dd> The red channel of the converted color in gamma sRGB space.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> cg</code>
                </dt>
                <dd> The green channel of the converted color in gamma sRGB space.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> cb</code>
                </dt>
                <dd> The blue channel of the converted color in gamma sRGB space.</dd>
              </dl>
              <h3>
                <span class="mw-headline" id="Notes">Notes</span>
              </h3>
              <p>An alpha value can be passed into the function as a fourth argument, but it will be returned unchanged because alpha is always linear.
</p>
              <h2>
                <span class="mw-headline" id="Function_2">Function</span>
              </h2>
              <h3>
                <span class="mw-headline" id="Synopsis_2">Synopsis</span>
              </h3>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="lua source-lua">
                  <pre class="de1">cr<span class="sy0">,</span> cg<span class="sy0">,</span> cb <span class="sy0">=</span> love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>linearToGamma<span class="br0">(</span> color <span class="br0">)</span></pre>
                </div>
              </div>
              <h3>
                <span class="mw-headline" id="Arguments_2">Arguments</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="table.html" title="table">table</a> color</code>
                </dt>
                <dd> An array with the red, green, and blue channels of the linear RGB color to convert.</dd>
              </dl>
              <h3>
                <span class="mw-headline" id="Returns_2">Returns</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="number.html" title="number">number</a> cr</code>
                </dt>
                <dd> The red channel of the converted color in gamma sRGB space.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> cg</code>
                </dt>
                <dd> The green channel of the converted color in gamma sRGB space.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> cb</code>
                </dt>
                <dd> The blue channel of the converted color in gamma sRGB space.</dd>
              </dl>
              <h2>
                <span class="mw-headline" id="Function_3">Function</span>
              </h2>
              <h3>
                <span class="mw-headline" id="Synopsis_3">Synopsis</span>
              </h3>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="lua source-lua">
                  <pre class="de1">c <span class="sy0">=</span> love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>linearToGamma<span class="br0">(</span> lc <span class="br0">)</span></pre>
                </div>
              </div>
              <h3>
                <span class="mw-headline" id="Arguments_3">Arguments</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="number.html" title="number">number</a> lc</code>
                </dt>
                <dd> The value of a color channel in linear RGB space to convert.</dd>
              </dl>
              <h3>
                <span class="mw-headline" id="Returns_3">Returns</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="number.html" title="number">number</a> c</code>
                </dt>
                <dd> The value of the color channel in gamma sRGB space.</dd>
              </dl>
              <h2>
                <span class="mw-headline" id="Examples">Examples</span>
              </h2>
              <h3>
                <span class="mw-headline" id="Pre-multiply_an_image.27s_alpha_with_its_RGB_values_in_linear_RGB_space">Pre-multiply an image's alpha with its RGB values in linear RGB space</span>
              </h3>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="lua source-lua">
                  <pre class="de1"><span class="kw1">local</span><span class="kw1">function</span> PremultiplyLinearPixel<span class="br0">(</span>x<span class="sy0">,</span> y<span class="sy0">,</span> r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="sy0">,</span> a<span class="br0">)</span>
   r <span class="sy0">=</span> r <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   g <span class="sy0">=</span> g <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   b <span class="sy0">=</span> b <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   <span class="kw1">return</span> r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="sy0">,</span> a
<span class="kw1">end</span>
&#xA0;
<span class="kw1">local</span> <span class="kw1">function</span> PremultiplyGammaPixel<span class="br0">(</span>x<span class="sy0">,</span> y<span class="sy0">,</span> r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="sy0">,</span> a<span class="br0">)</span>
   r<span class="sy0">,</span> g<span class="sy0">,</span> b <span class="sy0">=</span> love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>gammaToLinear<span class="br0">(</span>r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="br0">)</span>
   r <span class="sy0">=</span> r <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   g <span class="sy0">=</span> g <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   b <span class="sy0">=</span> b <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   r<span class="sy0">,</span> g<span class="sy0">,</span> b <span class="sy0">=</span> love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>linearToGamma<span class="br0">(</span>r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="br0">)</span>
   <span class="kw1">return</span> r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="sy0">,</span> a
<span class="kw1">end</span>
&#xA0;
<span class="co1">-- Loads an image and pre-multiplies its RGB values with its alpha, for use with the 'premultiplied' alpha blend mode.</span>
<span class="co1">-- The multiplication correctly accounts for the color-space of the image.</span>
<span class="kw1">function</span> NewPremultipliedImage<span class="br0">(</span>filepath<span class="sy0">,</span> <span class="kw3">format</span><span class="br0">)</span>
    <span class="kw1">local</span> imagedata <span class="sy0">=</span> love<span class="sy0">.</span>image<span class="sy0">.</span>newImageData<span class="br0">(</span>filepath<span class="br0">)</span>
&#xA0;
    <span class="kw1">local</span> mapfunction <span class="sy0">=</span> <span class="kw3">format</span> <span class="sy0">==</span> <span class="st0">"srgb"</span> <span class="kw2">and</span> PremultiplyGammaPixel <span class="kw2">or</span> PremultiplyLinearPixel
    imagedata<span class="sy0">:</span>mapPixel<span class="br0">(</span>mapfunction<span class="br0">)</span>
&#xA0;
    <span class="kw1">return</span> love<span class="sy0">.</span>graphics<span class="sy0">.</span>newImage<span class="br0">(</span>imagedata<span class="sy0">,</span> <span class="kw3">format</span><span class="br0">)</span>
<span class="kw1">end</span>
&#xA0;
<span class="co1">-- This assumes gamma-correct rendering (with the sRGB window flag) is being done.</span>
image <span class="sy0">=</span> NewPremultipliedImage<span class="br0">(</span><span class="st0">"pig.png"</span><span class="sy0">,</span> <span class="st0">"srgb"</span><span class="br0">)</span></pre>
                </div>
              </div>
              <h2>
                <span class="mw-headline" id="See_Also">See Also</span>
              </h2>
              <ul>
                <li>
                  <a href="love9.html" title="love.math">love.math</a>
                </li>
                <li>
                  <a href="love.math1.html" title="love.math.gammaToLinear">love.math.gammaToLinear</a>
                </li>
              </ul>
              <h2/>
            </div>
            <div class="catlinks" id="catlinks">
              <div class="mw-normal-catlinks" id="mw-normal-catlinks"><em>Category</em>: <ul><li><a href="category_functions.html" title="Category:Functions">Functions</a></li></ul></div>
            </div>
            <div class="visualClear"/>
          </div>
        </div>
      </div>
      <div class="visualClear"/>
      <div id="footer" role="contentinfo">
        <ul id="f-list">
          <li id="copyright">Content is available under <a class="external" href="http://www.gnu.org/copyleft/fdl.html" rel="nofollow">GNU Free Documentation License 1.3</a> unless otherwise noted.</li>
        </ul>
      </div>
    </div>
  </body>
</html>
