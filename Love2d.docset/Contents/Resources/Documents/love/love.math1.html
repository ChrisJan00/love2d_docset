<html class="client-nojs" dir="ltr" lang="en">
  <head>
    <meta charset="UTF-8"/>
    <title>love.math.gammaToLinear - LOVE</title>
    <meta content="MediaWiki 1.24.2" name="generator"/>
    <link href="" rel="ExportRDF" title="love.math.gammaToLinear" type="application/rdf+xml"/>
    <link href="favicon.ico" rel="shortcut icon"/>
    <link href="opensearch_desc.php" rel="search" title="LOVE (en)" type="application/opensearchdescription+xml"/>
    <link href="api.php_action_rsd" rel="EditURI" type="application/rsd+xml"/>
    <link href="" hreflang="x-default" rel="alternate"/>
    <link href="http://www.gnu.org/copyleft/fdl.html" rel="copyright"/>
    <link href="" rel="alternate" title="LOVE Atom feed" type="application/atom+xml"/>
    <link href="love_wiki_style.css" rel="stylesheet"/>
    <meta content="" name="ResourceLoaderDynamicStyles"/>
    <style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: love2d_wiki:resourceloader:filter:minify-css:7:daf253d59690fd9cabb6b95510bce103 */</style>
  </head>
  <body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-love_math_gammaToLinear skin-love action-view">
    <div id="globalWrapper">
      <div id="column-content">
        <div class="mw-body" id="content" role="main">
          <h1 class="firstHeading" id="firstHeading" lang="en">love.math.gammaToLinear</h1>
          <div id="bodyContent">
            <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
              <table bgcolor="#d0d0ff" style="margin-top: 1em; padding: 3px; border-radius:5px; -moz-border-radius:5px;">
                <tr>
                  <td>
                    <i>
                      <b>Available since L&#xD6;VE <a href="0.92.html" title="0.9.1">0.9.1</a></b>
                    </i>
                  </td>
                </tr>
                <tr>
                  <td>
                    <small>This function is not supported in earlier versions.</small>
                  </td>
                </tr>
              </table>
              <p>Converts a color from gamma-space (sRGB) to linear-space (RGB). This is useful when doing gamma-correct rendering using colors created based on what they look like on-screen.
</p>
              <p>Read more about gamma-correct rendering <a class="external text" href="http://http.developer.nvidia.com/GPUGems3/gpugems3_ch24.html" rel="nofollow">here</a>, <a class="external text" href="http://filmicgames.com/archives/299" rel="nofollow">here</a>, and <a class="external text" href="http://renderwonk.com/blog/index.php/archive/adventures-with-gamma-correct-rendering/" rel="nofollow">here</a>.
</p>
              <table align="center" bgcolor="gold" style="border-style:solid;border-width:1px;-moz-border-radius:3px;border-radius:3px;" width="80%">
                <tr>
                  <td width="1">
                    <img alt="O.png" height="64" src="o.png" width="64"/>
                  </td>
                  <td>Gamma-correct rendering is an advanced topic and it's easy to get color-spaces mixed up. If you're not sure whether you need this, you might want to avoid it.
</td>
                  <td width="1">&#xA0;
</td>
                </tr>
              </table>
              <br/>
              <h2>
                <span class="mw-headline" id="Function">Function</span>
              </h2>
              <h3>
                <span class="mw-headline" id="Synopsis">Synopsis</span>
              </h3>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="lua source-lua">
                  <pre class="de1">lr<span class="sy0">,</span> lg<span class="sy0">,</span> lb <span class="sy0">=</span> love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>gammaToLinear<span class="br0">(</span> r<span class="sy0">,</span> g<span class="sy0">,</span> b <span class="br0">)</span></pre>
                </div>
              </div>
              <h3>
                <span class="mw-headline" id="Arguments">Arguments</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="number.html" title="number">number</a> r</code>
                </dt>
                <dd> The red channel of the sRGB color to convert.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> g</code>
                </dt>
                <dd> The green channel of the sRGB color to convert.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> b</code>
                </dt>
                <dd> The blue channel of the sRGB color to convert.</dd>
              </dl>
              <h3>
                <span class="mw-headline" id="Returns">Returns</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="number.html" title="number">number</a> lr</code>
                </dt>
                <dd> The red channel of the converted color in linear RGB space.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> lg</code>
                </dt>
                <dd> The green channel of the converted color in linear RGB space.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> lb</code>
                </dt>
                <dd> The blue channel of the converted color in linear RGB space.</dd>
              </dl>
              <h3>
                <span class="mw-headline" id="Notes">Notes</span>
              </h3>
              <p>An alpha value can be passed into the function as a fourth argument, but it will be returned unchanged because alpha is always linear.
</p>
              <h2>
                <span class="mw-headline" id="Function_2">Function</span>
              </h2>
              <h3>
                <span class="mw-headline" id="Synopsis_2">Synopsis</span>
              </h3>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="lua source-lua">
                  <pre class="de1">lr<span class="sy0">,</span> lg<span class="sy0">,</span> lb <span class="sy0">=</span> love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>gammaToLinear<span class="br0">(</span> color <span class="br0">)</span></pre>
                </div>
              </div>
              <h3>
                <span class="mw-headline" id="Arguments_2">Arguments</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="table.html" title="table">table</a> color</code>
                </dt>
                <dd> An array with the red, green, and blue channels of the sRGB color to convert.</dd>
              </dl>
              <h3>
                <span class="mw-headline" id="Returns_2">Returns</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="number.html" title="number">number</a> lr</code>
                </dt>
                <dd> The red channel of the converted color in linear RGB space.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> lg</code>
                </dt>
                <dd> The green channel of the converted color in linear RGB space.</dd>
                <dt>
                  <code><a href="number.html" title="number">number</a> lb</code>
                </dt>
                <dd> The blue channel of the converted color in linear RGB space.</dd>
              </dl>
              <h2>
                <span class="mw-headline" id="Function_3">Function</span>
              </h2>
              <h3>
                <span class="mw-headline" id="Synopsis_3">Synopsis</span>
              </h3>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="lua source-lua">
                  <pre class="de1">lc <span class="sy0">=</span> love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>gammaToLinear<span class="br0">(</span> c <span class="br0">)</span></pre>
                </div>
              </div>
              <h3>
                <span class="mw-headline" id="Arguments_3">Arguments</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="number.html" title="number">number</a> c</code>
                </dt>
                <dd> The value of a color channel in sRGB space to convert.</dd>
              </dl>
              <h3>
                <span class="mw-headline" id="Returns_3">Returns</span>
              </h3>
              <dl>
                <dt>
                  <code><a href="number.html" title="number">number</a> lc</code>
                </dt>
                <dd> The value of the color channel in linear RGB space.</dd>
              </dl>
              <h2>
                <span class="mw-headline" id="Notes_2">Notes</span>
              </h2>
              <p>Dark colors have more precision in gamma-space sRGB than in linear-space RGB. Using this function to convert from sRGB to RGB can result in non-integer color values, which get truncated to integers and lose precision when used with other functions such as <a href="love.graphics228.html" title="love.graphics.setColor">love.graphics.setColor</a>.
</p>
              <h2>
                <span class="mw-headline" id="Examples">Examples</span>
              </h2>
              <h3>
                <span class="mw-headline" id="Gamma-correct_rendering_using_colored_circles">Gamma-correct rendering using colored circles</span>
              </h3>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="lua source-lua">
                  <pre class="de1"><span class="kw1">function</span> love<span class="sy0">.</span>load<span class="br0">(</span><span class="br0">)</span>
    <span class="co1">-- Enable the sRGB mode for the window. This converts from linear RGB to gamma-space sRGB when</span>
    <span class="co1">-- things are drawn to the screen (but blending calculations are done in linear RGB space.)</span>
    <span class="co1">-- Computer monitors display in the sRGB color space.</span>
    love<span class="sy0">.</span>window<span class="sy0">.</span>setMode<span class="br0">(</span><span class="nu0">800</span><span class="sy0">,</span> <span class="nu0">600</span><span class="sy0">,</span> <span class="br0">{</span>srgb<span class="sy0">=</span><span class="kw4">true</span><span class="sy0">,</span> fsaa<span class="sy0">=</span><span class="nu0">4</span><span class="br0">}</span><span class="br0">)</span>
&#xA0;
    <span class="co1">-- If sRGB mode for the screen isn't supported, the flag will be false.</span>
    <span class="kw1">local</span> _<span class="sy0">,</span> _<span class="sy0">,</span> flags <span class="sy0">=</span> love<span class="sy0">.</span>window<span class="sy0">.</span>getMode<span class="br0">(</span><span class="br0">)</span>
    gammacorrect <span class="sy0">=</span> flags<span class="sy0">.</span>srgb
&#xA0;
    <span class="co1">-- Here we have a red-ish color with 50% opacity. I chose the color values here based on what it looked like</span>
    <span class="co1">-- on-screen, and because computer monitors display in the sRGB color space, this color is in the sRGB color space.</span>
    color1 <span class="sy0">=</span> <span class="br0">{</span><span class="nu0">187</span><span class="sy0">,</span> <span class="nu0">54</span><span class="sy0">,</span> <span class="nu0">100</span><span class="sy0">,</span> <span class="nu0">128</span><span class="br0">}</span>
&#xA0;
    <span class="kw1">if</span> gammacorrect <span class="kw1">then</span>
        <span class="co1">-- If the window is in srgb mode, it converts from linear RGB to sRGB when drawing. This means we need to</span>
        <span class="co1">-- convert the sRGB-space color to linear RGB space.</span>
        color1 <span class="sy0">=</span> <span class="br0">{</span>love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>gammaToLinear<span class="br0">(</span>color1<span class="br0">)</span><span class="br0">}</span>
    <span class="kw1">end</span>
&#xA0;
    <span class="co1">-- We want this color to be halfway between white and black (with 50% opacity as well).</span>
    <span class="co1">-- If the window is in srgb mode, it expects linear-space colors and does blending that way, so this will work</span>
    <span class="co1">-- out fine. If the window isn't in srgb mode, the color won't be halfway between white and black because</span>
    <span class="co1">-- the values drawn to the screen aren't treated as linear-space RGB and converted to sRGB.</span>
    <span class="co1">-- We could use love.math.linearToGamma in that case, but blending would still be wrong.</span>
    color2 <span class="sy0">=</span> <span class="br0">{</span><span class="nu0">128</span><span class="sy0">,</span> <span class="nu0">128</span><span class="sy0">,</span> <span class="nu0">128</span><span class="sy0">,</span> <span class="nu0">128</span><span class="br0">}</span>
<span class="kw1">end</span>
&#xA0;
<span class="co1">-- Draw two overlapping circles with additive blending, using the colors above.</span>
<span class="kw1">function</span> love<span class="sy0">.</span>draw<span class="br0">(</span><span class="br0">)</span>
    love<span class="sy0">.</span>graphics<span class="sy0">.</span>setBlendMode<span class="br0">(</span><span class="st0">"additive"</span><span class="br0">)</span>
&#xA0;
    love<span class="sy0">.</span>graphics<span class="sy0">.</span>setColor<span class="br0">(</span>color1<span class="br0">)</span>
    love<span class="sy0">.</span>graphics<span class="sy0">.</span>circle<span class="br0">(</span><span class="st0">"fill"</span><span class="sy0">,</span> <span class="nu0">300</span><span class="sy0">,</span> <span class="nu0">300</span><span class="sy0">,</span> <span class="nu0">200</span><span class="br0">)</span>
&#xA0;
    love<span class="sy0">.</span>graphics<span class="sy0">.</span>setColor<span class="br0">(</span>color2<span class="br0">)</span>
    love<span class="sy0">.</span>graphics<span class="sy0">.</span>circle<span class="br0">(</span><span class="st0">"fill"</span><span class="sy0">,</span> <span class="nu0">500</span><span class="sy0">,</span> <span class="nu0">300</span><span class="sy0">,</span> <span class="nu0">200</span><span class="br0">)</span>
<span class="kw1">end</span></pre>
                </div>
              </div>
              <h3>
                <span class="mw-headline" id="Pre-multiply_an_image.27s_alpha_with_its_RGB_values_in_linear_RGB_space">Pre-multiply an image's alpha with its RGB values in linear RGB space</span>
              </h3>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="lua source-lua">
                  <pre class="de1"><span class="kw1">local</span><span class="kw1">function</span> PremultiplyLinearPixel<span class="br0">(</span>x<span class="sy0">,</span> y<span class="sy0">,</span> r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="sy0">,</span> a<span class="br0">)</span>
   r <span class="sy0">=</span> r <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   g <span class="sy0">=</span> g <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   b <span class="sy0">=</span> b <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   <span class="kw1">return</span> r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="sy0">,</span> a
<span class="kw1">end</span>
&#xA0;
<span class="kw1">local</span> <span class="kw1">function</span> PremultiplyGammaPixel<span class="br0">(</span>x<span class="sy0">,</span> y<span class="sy0">,</span> r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="sy0">,</span> a<span class="br0">)</span>
   r<span class="sy0">,</span> g<span class="sy0">,</span> b <span class="sy0">=</span> love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>gammaToLinear<span class="br0">(</span>r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="br0">)</span>
   r <span class="sy0">=</span> r <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   g <span class="sy0">=</span> g <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   b <span class="sy0">=</span> b <span class="sy0">*</span> a <span class="sy0">/</span> <span class="nu0">255</span>
   r<span class="sy0">,</span> g<span class="sy0">,</span> b <span class="sy0">=</span> love<span class="sy0">.</span><span class="kw3">math</span><span class="sy0">.</span>linearToGamma<span class="br0">(</span>r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="br0">)</span>
   <span class="kw1">return</span> r<span class="sy0">,</span> g<span class="sy0">,</span> b<span class="sy0">,</span> a
<span class="kw1">end</span>
&#xA0;
<span class="co1">-- Loads an image and pre-multiplies its RGB values with its alpha, for use with the 'premultiplied' alpha blend mode.</span>
<span class="co1">-- The multiplication correctly accounts for the color-space of the image.</span>
<span class="kw1">function</span> NewPremultipliedImage<span class="br0">(</span>filepath<span class="sy0">,</span> <span class="kw3">format</span><span class="br0">)</span>
    <span class="kw1">local</span> imagedata <span class="sy0">=</span> love<span class="sy0">.</span>image<span class="sy0">.</span>newImageData<span class="br0">(</span>filepath<span class="br0">)</span>
&#xA0;
    <span class="kw1">local</span> mapfunction <span class="sy0">=</span> <span class="kw3">format</span> <span class="sy0">==</span> <span class="st0">"srgb"</span> <span class="kw2">and</span> PremultiplyGammaPixel <span class="kw2">or</span> PremultiplyLinearPixel
    imagedata<span class="sy0">:</span>mapPixel<span class="br0">(</span>mapfunction<span class="br0">)</span>
&#xA0;
    <span class="kw1">return</span> love<span class="sy0">.</span>graphics<span class="sy0">.</span>newImage<span class="br0">(</span>imagedata<span class="sy0">,</span> <span class="kw3">format</span><span class="br0">)</span>
<span class="kw1">end</span>
&#xA0;
<span class="co1">-- This assumes gamma-correct rendering (with the sRGB window flag) is being done.</span>
image <span class="sy0">=</span> NewPremultipliedImage<span class="br0">(</span><span class="st0">"pig.png"</span><span class="sy0">,</span> <span class="st0">"srgb"</span><span class="br0">)</span></pre>
                </div>
              </div>
              <h2>
                <span class="mw-headline" id="See_Also">See Also</span>
              </h2>
              <ul>
                <li>
                  <a href="love9.html" title="love.math">love.math</a>
                </li>
                <li>
                  <a href="love.math2.html" title="love.math.linearToGamma">love.math.linearToGamma</a>
                </li>
              </ul>
              <h2/>
            </div>
            <div class="catlinks" id="catlinks">
              <div class="mw-normal-catlinks" id="mw-normal-catlinks"><em>Category</em>: <ul><li><a href="category_functions.html" title="Category:Functions">Functions</a></li></ul></div>
            </div>
            <div class="visualClear"/>
          </div>
        </div>
      </div>
      <div class="visualClear"/>
      <div id="footer" role="contentinfo">
        <ul id="f-list">
          <li id="copyright">Content is available under <a class="external" href="http://www.gnu.org/copyleft/fdl.html" rel="nofollow">GNU Free Documentation License 1.3</a> unless otherwise noted.</li>
        </ul>
      </div>
    </div>
  </body>
</html>
